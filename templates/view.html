{% extends "base_user.html" %}

{% block title %}الإشعارات السابقة{% endblock %}

{% block content %}
<div class="card p-4 shadow-sm">
    <h3 class="mb-4 text-center">الإشعارات السابقة</h3>

    {% if transactions %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>الصورة</th>
                <th>المبلغ</th>
                <th>التاريخ</th>
                <th>إجراءات</th>
            </tr>
        </thead>
        <tbody>
            {% for trx in transactions %}
            <tr>
                <td><a href="{{ '/' + trx.image_path }}" target="_blank">
                    <img src="{{ '/' + trx.image_path }}" width="80">
                </a></td>
                <td>{{ "%.2f"|format(trx.amount) }}</td>
                <td>{{ trx.created_at }}</td>
                <td>
                    <form action="/delete/{{ trx.id }}" method="post" onsubmit="return confirm('هل أنت متأكد من الحذف؟');">
                        <button type="submit" class="btn btn-danger btn-sm">حذف</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            <tr>
                <td><strong>الإجمالي</strong></td>
                <td colspan="3"><strong>{{ "%.2f"|format(total_amount) }}</strong></td>
            </tr>
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">لا توجد إشعارات محفوظة بعد.</div>
    {% endif %}
</div>

<style>
.btn-danger { background-color:#d9534f; color:#fff; }
.btn-danger:hover { background-color:#c12e2a; }
</style>
{% endblock %}
